{"version":3,"sources":["logo.svg","components/MultiCard.js","components/FluxTab.js","components/LeftPanel.js","classes/Content.js","classes/FluxContent.js","classes/DroppableContent.js","classes/Link.js","classes/Flux.js","components/Diagram.js","components/ContentAdmin.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","fluxCard","cursor","width","border","margin","MultiCard","index","Meta","Card","title","this","props","identificador","description","cantidad","styles","generateStyles","react_default","a","createElement","card","key","style","categoria","available","backgroundColor","position","height","top","left","_this","onClick","draggable","flux","className","generateFluxCard","map","number","generateMultiCard","generateCard","React","Component","FluxTab","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","modalVisible","fluxInDiagram","addFluxToDiagram","setState","defineProperty","name","_this2","modal","visible","onCancel","getOrderedContentsFromOrderField","content","i","getName","es_button","type","disabled","_this3","fluxes","renderModal","MultiCard_MultiCard","showContents","LeftPanel","contentChanged","selectedItem","hiddenCards","value","console","log","axios","get","then","response","data","length","contents","changeContents","event","dataTransfer","dropEffect","push","selectCategory","categories","setData","JSON","stringify","contentId","isNavegable","delete","params","id","window","open","url","location","reload","TabPane","Tabs","Option","Select","tabs","tab","color","es_select","undefined","placeholder","onChange","e","category","toString","onDragStart","onContentDragStart","contenidos","onDragEnd","onContentDragEnd","onContentClick","find","hiddenCard","FluxTab_FluxTab","Content","idContent","metadata","keys","k","FluxContent","order","DroppableContent","Link","origin","destination","Flux","links","link","setContents","filter","toLowerCase","sort","content1","content2","getOrder","discardedNodeKey","subject","subjectFromLinkKey","fromNode","subjectToLinkKey","toNode","removeLinkWithOriginAndDestination","addLink","from","to","setLinks","fluxLink","firstContent","getFirstContentFromLinks","nextContent","orderedContents","auxLink","getLinkWithOrigin","getContentByName","goObj","go","GraphObject","make","GoJs","success","message","error","onChangeInputText","inputValueText","target","onChangeRadioLink","valueRadioLink","onChangeRadioNode","valueRadioNode","onChangeCheckNode","checkedValue","onChangeCheckLink","valueCheck","checked","confirmNodeModal","contentNode","temporaryContent","pattern","modalNodeVisible","confirmLinkModal","temporaryLink","metaInfo","next","modalLinkVisible","renderCanvas","bind","assertThisInitialized","keyForRerender","myModel","myDiagram","loading","inputValue","showSend","addedContents","patterns","infoPatterns","onDiagramEnter","onDiagramDrop","onDragOver","sendData","showSendDataModal","onChangeInput","generateNodeTemplate","generateLinkTemplate","shouldShowFlux","addContentsManually","handlerThis","Node","doubleClick","node","Binding","Shape","portId","fromLinkable","toLinkable","toMaxLinks","fromMaxLinks","toLinkableSelfNode","TextBlock","font","curve","Bezier","relinkableFrom","relinkableTo","toArrow","fill","model","TreeModel","diagram","Diagram","refs","goJsDiv","initialContentAlignment","Spot","Center","addDiagramListener","ev","addLinkWithOriginAndDestination","Math","random","relink","parameter","part","first","Yd","removeContent","removeLinkWithOrigin","removeLinkWithDestination","setModelAndDiagram","getOrderedContentsFromLinks","contentsToSend","nombreConjunto","post","catch","GraphLinksModel","nodeTemplate","linkTemplate","validCycle","CycleDestinationTree","preventDefault","properties","parsedContent1","parse","parsedContent2","parsedContent3","parsedContent4","objectSpread","contentid","isnavegable","some","addedContent","getIdContent","oldContents","fluxName","point","startTransaction","addNodeData","Brush","randomColor","commitTransaction","addLinkDataCollection","_this4","newFlux","isNotInDiagram","addContent","transformViewToDoc","Point","addContentToGoJsDiagram","prevState","concat","toConsumableArray","getOrderedLinksFromContentsOrder","doesLinkApplies","addLinkToGoJsDiagram","PIXELRATIO","computePixelRatio","pixelratio","can","HTMLCanvasElement","bbox","getBoundingClientRect","bbw","bbh","mx","clientX","my","clientY","getDroppableContent","items","calculateDroppedPoint","stopPropagation","_this5","radioStyle","display","lineHeight","RadioGroup","Radio","Group","centered","onOk","es_checkbox","es_radio","_this6","input","marginLeft","_this7","Panel","Collapse","marginTop","handlePattern","collapse","bordered","defaultActiveKey","expandIcon","_ref","isActive","icon","rotate","header","background","borderRadius","marginBottom","overflow","paddingLeft","spin","size","onDragEnter","onDrop","ref","nodeModal","linkModal","submitModal","ContentAdmin","showFluxContent","diagramFluxId","_id","newContents","diagramFlux","Header","Layout","Sider","layout","LeftPanel_LeftPanel","fontSize","Diagram_GoJs","App","ContentAdmin_ContentAdmin","Boolean","hostname","match","ReactDOM","render","src_components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.89d35d1e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","import React from 'react';\r\nimport { Card } from 'antd';\r\n\r\n\r\nlet fluxCard = { \r\n  cursor:\"pointer\", \r\n  width:\"100%\",\r\n  border:\"1px solid\", \r\n  margin:\"0 auto\" \r\n}\r\n\r\nexport default class MultiCard extends React.Component{\r\n\r\n  generateMultiCard(index){\r\n    const { Meta } = Card;\r\n    const title = this.props.identificador //index === this.props.cantidad ? this.props.identificador : \"\"\r\n    const description = index === 2 ? (this.props.cantidad + \" contenidos\") : \"\"\r\n    const styles = this.generateStyles(index)\r\n    return(\r\n      <Card key={index} style={styles}>\r\n        <Meta title={title} description={description} />\r\n      </Card>\r\n    )\r\n  }\r\n  \r\n  generateCard(){\r\n    const { Meta } = Card;\r\n    const title = this.props.identificador;\r\n    const description = this.props.categoria;\r\n    var isAvailable = this.props.available\r\n    return(\r\n      (isAvailable) ?\r\n      <Card style={{ width:\"100%\",border:\"1px solid\", margin:\"0 auto\" }}>\r\n        <Meta title={title} description={description}/>\r\n      </Card>\r\n      :\r\n      <Card style={{ width:\"100%\",border:\"1px solid\", margin:\"0 auto\", backgroundColor: \"red\" }}>\r\n        <Meta title={title} description={description}/>\r\n      </Card>\r\n    )\r\n  }\r\n  \r\n  generateFluxCard(){\r\n    const { Meta } = Card;\r\n    const title = this.props.identificador;\r\n    const description = \"Flujo\";\r\n    return(\r\n        <Card \r\n          style={fluxCard}>\r\n          <Meta title={title} description={description}/>\r\n        </Card>\r\n    )\r\n  }\r\n\r\n  generateStyles(index){\r\n    return(\r\n      {\r\n        position:\"absolute\",\r\n        width:\"100%\",\r\n        height:\"95px\",\r\n        border:\"1px solid\",\r\n        margin:\"0 auto\",\r\n        top:(10 * index) + \"px\",\r\n        left:(10 * index) + \"px\"\r\n      }   \r\n    ) \r\n  }\r\n  \r\n\r\n  render(){\r\n    return(\r\n      <div onClick={this.props.onClick} draggable={!this.props.flux} className=\"multicard-container\">\r\n        {this.props.flux ? \r\n          this.generateFluxCard()\r\n        :\r\n        this.props.cantidad > 1 ?\r\n          [0,1,2].map((number,index) => \r\n            this.generateMultiCard(index)\r\n          )\r\n        :\r\n          this.generateCard()\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n}","import React from 'react'\r\nimport MultiCard from \"./MultiCard.js\"\r\nimport {Modal,Button} from 'antd'\r\n\r\nexport default class FluxTab extends React.Component{\r\n\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.state = { \r\n      modalVisible:[],\r\n      fluxInDiagram:[]\r\n    }\r\n  }\r\n\r\n  addFluxToDiagram(flux){\r\n    this.props.addFluxToDiagram(flux);\r\n    this.setState({\r\n      modalVisible:false,\r\n      fluxInDiagram:{\r\n        [flux.name]:true\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  renderModal(flux){\r\n    return(\r\n      <Modal\r\n        key={flux.name}\r\n        title={\"Contenidos del flujo - \" + flux.name}\r\n        visible={true}\r\n        onCancel={() => this.setState({modalVisible:false})}\r\n      >\r\n        {flux.getOrderedContentsFromOrderField().map( (content,i) => \r\n          <div key={i}>{content.getName()}</div>\r\n        )}\r\n        <Button \r\n          type=\"primary\" \r\n          onClick={() => this.addFluxToDiagram(flux)}\r\n          disabled={this.state.fluxInDiagram[flux.name]}\r\n        >\r\n          Editar\r\n        </Button>\r\n      </Modal>\r\n    )\r\n  }\r\n\r\n  showContents(index){\r\n    this.setState({\r\n      modalVisible:{\r\n        [index]:true\r\n      }\r\n    })\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div>\r\n          {this.props.fluxes != null && this.props.fluxes.map( (flux,i) =>\r\n            <div key={i}> \r\n              {this.state.modalVisible[i] && this.renderModal(flux)}\r\n              <MultiCard\r\n                disabled={this.state.fluxInDiagram[flux.name]}\r\n                onClick={() => this.showContents(i)}\r\n                flux={true}\r\n                key={i}\r\n                identificador={flux.name}\r\n              />\r\n            </div>\r\n          )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n}","import React from 'react'\r\nimport MultiCard from \"./MultiCard.js\"\r\nimport { Tabs, Select } from 'antd';\r\nimport FluxTab from './FluxTab.js';\r\nimport axios from 'axios'\r\n\r\n\r\nexport default class LeftPanel extends React.Component {\r\n  constructor(props){\r\n      super(props)\r\n      this.state = {\r\n        contentChanged:false,\r\n        selectedItem:\"\",\r\n        hiddenCards:[]\r\n      }\r\n  }\r\n\r\n  selectCategory(value){\r\n    console.log(value)\r\n    axios.get(\"https://alexa-apirest.herokuapp.com/users/admin/contentsByCategory/\"+value+\"/gonza\")\r\n    .then( (response) => {\r\n      if (response.data.length > 0) {\r\n            let contents = response.data\r\n            //let contentsFilter = contents.filter((elem)=> !this.state.hiddenCards.includes(elem.contenidos[0].identificador) )\r\n            //let index = contentsFilter.indexOf(this.props.manager.getContentById(idContent))\r\n            //contents = contentsFilter.splice(index,1)\r\n            this.props.changeContents(contents);\r\n      }\r\n      this.setState({\r\n        selectedItem:value\r\n      })  \r\n    });\r\n  }\r\n\r\n  onContentDragEnd(event,content){ \r\n    if(event.dataTransfer.dropEffect !== 'none'){\r\n      //event.target.parentNode.style.display = \"none\"\r\n      var hiddenCards = this.state.hiddenCards\r\n      hiddenCards.push(content.identificador)\r\n      this.setState({\r\n        hiddenCards: hiddenCards\r\n      })\r\n      \r\n      if(this.state.selectedItem !== \"\"){ \r\n        this.selectCategory(this.state.selectedItem) //Si todavia no asigno categoria, mandar la que es por defecto\r\n      }\r\n      else{ //Mandar la primera\r\n        if(this.props.categories.length > 0)\r\n          this.selectCategory(this.props.categories[0]) \r\n        else\r\n          this.selectCategory(axios.get(\"https://alexa-apirest.herokuapp.com/users/getFirstCategory/gonza\")) \r\n      } \r\n    } \r\n  }\r\n\r\n\r\n  onContentDragStart(event,content){\r\n    event.dataTransfer.setData(JSON.stringify({contentId:content.contentId}), 'contentId');\r\n    event.dataTransfer.setData(JSON.stringify({identificador:content.identificador}), 'identificador');\r\n    event.dataTransfer.setData(JSON.stringify({categoria:content.categoria}), 'categoria');\r\n    event.dataTransfer.setData(JSON.stringify({isNavegable:content.available}), 'isNavegable');      \r\n  }\r\n\r\n  onContentClick(event,content){\r\n    \r\n    if (!content.available){\r\n      axios.delete(\"https://alexa-apirest.herokuapp.com/users/deleteContentUnavailable/\"\r\n      ,{ params: { name: \"gonza\", id:content.contentId }},function(data){\r\n          console.log(data)\r\n          //abrir en una nueva pestaña la url del contenido\r\n          window.open(content.url, \"_blank\")\r\n          window.location.reload()\r\n      });\r\n    }\r\n  }\r\n\r\n  generateStyles(index){\r\n    return(\r\n      {\r\n        position:\"relative\",\r\n        width:\"80%\",\r\n        //height:\"95px\",\r\n        border:\"1px solid\",\r\n        margin:\"0 auto\",\r\n        //bottom:\"40px\",\r\n        top:\"5px\"\r\n      }   \r\n    ) \r\n  }\r\n\r\n  render(){\r\n    const TabPane = Tabs.TabPane;\r\n    const {Option} = Select\r\n    const styles = this.generateStyles()\r\n    return(\r\n      <div className=\"no-assigned__cards__container\">\r\n        <Tabs>\r\n          <TabPane tab=\"Contenidos\" key=\"1\">\r\n            {this.props.categories.length > 0 &&\r\n              <div>\r\n              <h3 style={{color:\"white\",left:\"10px\"}}> Filtrar por categoria </h3>\r\n              <Select value={this.state.selectedItem? this.state.selectedItem : undefined}  placeholder=\"Categoria\" \r\n                  onChange={(e) =>this.selectCategory(e)} style={styles}>\r\n                  {this.props.categories.map( (category, index) => {\r\n                    return(\r\n                        <Option \r\n                          key={index} \r\n                          value={category.toString()}>\r\n                            {category.toString()}\r\n                        </Option>\r\n                        )\r\n                    })\r\n                  }\r\n              </Select>\r\n              <br/>\r\n              <br/>\r\n              <br/>\r\n              </div>\r\n            }\r\n            \r\n            {this.props.contents.map((content,index) =>\r\n                <div\r\n                key={index} \r\n                onDragStart={(e) => this.onContentDragStart(e,content.contenidos)} \r\n                onDragEnd={(e) => this.onContentDragEnd(e,content.contenidos)}\r\n                onClick = {(e) => this.onContentClick(e,content.contenidos)}\r\n                >\r\n                  {!this.state.hiddenCards.find(hiddenCard => hiddenCard === content.contenidos.identificador) &&\r\n                    <MultiCard  \r\n                      identificador={content.contenidos.identificador} \r\n                      categoria={content.contenidos.categoria}\r\n                      cantidad={content.contenidos.contentId ? content.contenidos.contentId.length : null}\r\n                      available={content.contenidos.available} \r\n                    />\r\n                  }\r\n                </div>\r\n              \r\n          )}\r\n          </TabPane>\r\n          <TabPane tab=\"Flujos\" key=\"2\">\r\n              <FluxTab \r\n                fluxes={this.props.fluxes}\r\n                addFluxToDiagram={this.props.addFluxToDiagram}  \r\n              />\r\n          </TabPane>          \r\n        </Tabs>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}","export default class Content {\r\n\r\n  constructor(name, idContent, category, data){\r\n    this.name = name;\r\n    this.idContent = idContent\r\n    this.category = category\r\n    this.metadata = {}\r\n  }\r\n\r\n  getName(){\r\n    return this.name\r\n  }\r\n\r\n  getIdContent(){\r\n    return this.idContent\r\n  }\r\n\r\n  getCategory(){\r\n    return this.category\r\n  }\r\n\r\n  getIsNavegable(){\r\n    return this.isNavegable\r\n  }  \r\n\r\n  setName(name){\r\n    this.name = name;\r\n  }\r\n\r\n  setIdContent(idContent){\r\n    this.idContent = idContent;\r\n  }\r\n\r\n  setCategory(category){\r\n    this.category = category;\r\n  }\r\n\r\n  getData(){\r\n    return this.data\r\n  }  \r\n\r\n  setData(data){\r\n    var keys = Object.keys(data)\r\n    keys.map( k => this.metadata[k] = data[k] )\r\n  }\r\n\r\n}","import Content from './Content'\r\nexport default class FluxContent extends Content {\r\n    constructor(name, idContent, category, order){\r\n        super(name, idContent, category)\r\n        this.order = order\r\n    }\r\n\r\n    getOrder(){\r\n        return this.order\r\n    }\r\n\r\n    setOrder(order){\r\n        this.order = order\r\n    }\r\n\r\n} ","import Content from './Content'\r\nexport default class DroppableContent extends Content {\r\n    constructor(name, idContent, category, isNavegable){\r\n        super(name, idContent, category)\r\n        this.isNavegable = isNavegable\r\n    }\r\n\r\n    getisNavegable(){\r\n        return this.isNavegable\r\n    }\r\n\r\n    setIsNavegable(isNavegable){\r\n        this.isNavegable = isNavegable\r\n    }\r\n\r\n} ","export default class Link {\r\n\r\n  constructor(origin, destination){\r\n    this.origin = origin;\r\n    this.destination = destination;\r\n  }\r\n\r\n  getOriginContent(){\r\n    return this.origin;\r\n  }\r\n\r\n  getDestinationContent(){\r\n    return this.destination;\r\n  }\r\n\r\n  setOriginContent(content){\r\n    this.origin = content;\r\n  }\r\n\r\n  setDestinationContent(content){\r\n    this.destination = content;\r\n  }\r\n\r\n}","import Link from './Link'\r\nimport FluxContent from './FluxContent';\r\n\r\nexport default class Flux {\r\n\r\n  constructor(name, contents, links){\r\n    this.name = name;\r\n    this.contents = contents ? contents.map(content => new FluxContent(content.identificador, content.contentId, content.categoria, content.order)) : [];\r\n    this.links = links ? links : []\r\n    return this;\r\n  }\r\n\r\n  addLink(link){\r\n    this.links.push(link)\r\n  }\r\n\r\n  getLinks(){\r\n    return this.links;\r\n  }\r\n    \r\n  setLinks(links){\r\n    this.links = links\r\n  }\r\n\r\n  getContents(){\r\n    return this.contents\r\n  }\r\n\r\n  addContent(content){\r\n    this.contents.push(content)\r\n  }\r\n\r\n  setContents(contents){\r\n    this.contents = contents\r\n  }\r\n\r\n  removeContent(identificador){\r\n    this.setContents(this.contents.filter(content => content.getName().toLowerCase() !== identificador.toLowerCase()))\r\n  }\r\n\r\n\r\n  getOrderedContentsFromOrderField(){\r\n    return this.contents.sort((content1,content2) => {return content1.getOrder() - content2.getOrder()})\r\n  }\r\n\r\n  relink(discardedNodeKey, subject){\r\n    let subjectFromLinkKey = subject.fromNode.data.key\r\n    let subjectToLinkKey = subject.toNode.data.key\r\n    if (this.links.filter(link => link.destination === discardedNodeKey && link.origin === subjectFromLinkKey).length > 0) {\r\n      this.removeLinkWithOriginAndDestination(subjectFromLinkKey, discardedNodeKey)\r\n    }\r\n    else{\r\n      if (this.links.filter(link => link.origin === discardedNodeKey && link.destination === subjectToLinkKey).length > 0){\r\n        this.removeLinkWithOriginAndDestination(discardedNodeKey, subjectToLinkKey)\r\n      }\r\n    }\r\n    this.addLink(new Link(subjectFromLinkKey, subjectToLinkKey))\r\n  }  \r\n\r\n  removeLinkWithOriginAndDestination(from, to){\r\n    this.setLinks(this.links.filter(link => !(link.origin === from && link.destination === to)))\r\n  }\r\n\r\n  removeLinkWithOrigin(from){\r\n    this.setLinks(this.links.filter(link => link.origin !== from))\r\n  }\r\n\r\n  removeLinkWithDestination(to){\r\n    this.setLinks(this.links.filter(link => link.destination !== to))\r\n  }  \r\n\r\n  addLinkWithOriginAndDestination(from, to){\r\n    this.addLink(new Link(from, to))\r\n  }\r\n\r\n  removeLink(link){\r\n    this.setLinks(fluxLink => fluxLink !== link)\r\n  }\r\n\r\n  getOrderedLinksFromContentsOrder(){\r\n    let links = []\r\n    this.getOrderedContentsFromOrderField().map( (content,i) => {\r\n      if (this.getOrderedContentsFromOrderField()[i + 1]) {\r\n        let origin = content.getName()\r\n        let destination = this.getOrderedContentsFromOrderField()[i + 1].getName()\r\n        links.push(new Link(origin, destination))\r\n      }\r\n    })\r\n    this.links = links\r\n    return links\r\n  }\r\n\r\n\r\n  //when the flux edition is done, the order of the contents is determined by the links, not by the contents array order.\r\n\r\n\r\n  getOrderedContentsFromLinks(){\r\n    let firstContent = this.getFirstContentFromLinks();\r\n    let nextContent = firstContent;\r\n    let orderedContents = [firstContent]\r\n    this.links.map( link => {\r\n      let auxLink = this.getLinkWithOrigin(nextContent);\r\n      nextContent = this.getContentByName(auxLink.destination);\r\n      orderedContents.push(nextContent);\r\n    })\r\n    return orderedContents;    \r\n  }\r\n\r\n  getFirstContentFromLinks(){ //returns the content that is no destination for any link but that is origin of one. contents out of the flow are ignored\r\n    return this.contents.filter( content => {\r\n      return this.links.filter( link => link.destination.toLowerCase() === content.getName().toLowerCase()).length === 0 &&\r\n             this.links.filter( link => link.origin.toLowerCase() === content.getName().toLowerCase()).length === 1\r\n    })[0];\r\n  }\r\n\r\n  getLinkWithOrigin(content){\r\n    return this.links.filter(link => link.origin.toLowerCase() === content.getName().toLowerCase())[0]\r\n  }\r\n\r\n  getContentByName(contentId){\r\n    return this.contents.filter(content => content.getName().toLowerCase() === contentId.toLowerCase())[0]\r\n  }\r\n\r\n}","import React, {Component} from 'react';\r\nimport go from 'gojs';\r\nimport {Button, Spin, Modal, Input, Select, Collapse, Icon, message,Checkbox, Radio} from 'antd'\r\nimport axios from 'axios'\r\nimport FluxContent from '../classes/FluxContent';\r\nimport DroppableContent from '../classes/DroppableContent';\r\nimport Flux from '../classes/Flux';\r\nconst goObj = go.GraphObject.make;\r\n\r\nexport default class GoJs extends Component {\r\n\r\n  constructor (props) {\r\n    super (props);\r\n    this.renderCanvas = this.renderCanvas.bind (this);\r\n    this.state = {\r\n      keyForRerender:0,\r\n      flux:null,\r\n      temporaryContent:null,\r\n      temporaryLink:null,\r\n      valueRadioLink:null,\r\n      valueRadioNode:null,\r\n      valueCheck:false,\r\n      modalLinkVisible:false,\r\n      modalNodeVisible:false,\r\n      contents:[],\r\n      myModel: null, \r\n      myDiagram: null,\r\n      loading:false,\r\n      success:null,\r\n      error:null,\r\n      modalVisible:false,\r\n      inputValue:null,\r\n      inputValueText:null,\r\n      showSend:false,\r\n      pattern:null,\r\n      index:null,\r\n      addedContents:[],\r\n      patterns:[\"Leer solo titulos\",\"Leer introduccion y contenido\"],//,\"Read paragraph to paragraph\"\r\n      infoPatterns:[\"Solo se leeran los titulos de los contenidos definidos para el flujo.\"\r\n      ,\"Se leeran los titulos de los contenidos definidos de a uno por vez, dando la posibilidad de elegir entre leer solo una introduccion o tambien el resto del contenido.\"\r\n      ] //,\"The body of the contents will be read paragraph by paragraph.\"\r\n    }\r\n    this.onDiagramEnter = this.onDiagramEnter.bind(this)\r\n    this.onDiagramDrop = this.onDiagramDrop.bind(this)\r\n    this.onDragOver = this.onDragOver.bind(this)\r\n    this.sendData = this.sendData.bind(this)\r\n    this.renderCanvas = this.renderCanvas.bind(this)\r\n    this.showSendDataModal = this.showSendDataModal.bind(this)\r\n    this.onChangeInput = this.onChangeInput.bind(this)\r\n    this.generateNodeTemplate = this.generateNodeTemplate.bind(this)\r\n    this.generateLinkTemplate= this.generateLinkTemplate.bind(this)\r\n  }\r\n\r\n  componentWillReceiveProps(props){\r\n    if (props.shouldShowFlux !== this.props.shouldShowFlux || props.flux !== this.props.flux) {\r\n      this.addContentsManually(props.flux);\r\n      console.log(this.state)\r\n    }\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.renderCanvas ();\r\n  }\r\n\r\n  handlePattern(pattern){\r\n    var index;\r\n    switch(pattern){\r\n      case \"Leer solo titulos\":\r\n        index = 0\r\n      break;\r\n      case \"Leer introduccion y contenido\":\r\n        index = 1\r\n      break;\r\n      case \"Leer parrafo a parrafo\":\r\n        index = 2\r\n      break;\r\n    }\r\n\r\n    this.setState({pattern,index})\r\n  }\r\n\r\n  generateNodeTemplate(){\r\n    var handlerThis = this;\r\n    let nodeTemplate = goObj(\r\n      go.Node,\r\n     \"Auto\",\r\n      {\r\n        doubleClick: function(e, node) {\r\n            // node is the Node that was double-clicked\r\n            let data = node.data;\r\n            let key = data.key\r\n            handlerThis.setState({\r\n              modalNodeVisible:true,\r\n              temporaryContent:key\r\n            })\r\n        }\r\n      },\r\n      new go.Binding('location'),\r\n      goObj(\r\n        go.Shape, \"RoundedRectangle\",\r\n        {\r\n          portId: \"\", \r\n          fromLinkable: true, \r\n          toLinkable: true,\r\n          toMaxLinks:1,\r\n          fromMaxLinks:1,\r\n          toLinkableSelfNode: false\r\n        },\r\n        new go.Binding(\"fill\", \"color\")\r\n      ),\r\n      goObj(\r\n        go.TextBlock,\r\n        { margin: 6, font: \"18px sans-serif\" },\r\n        new go.Binding(\"text\", \"identificador\")\r\n      )\r\n    )\r\n    return nodeTemplate;    \r\n  }\r\n\r\n  generateLinkTemplate(){\r\n    var handlerThis = this;\r\n    let linkTemplate = goObj(go.Link,\r\n      { curve: go.Link.Bezier },\r\n      {\r\n        doubleClick: function(e, link) {\r\n            // node is the Node that was double-clicked\r\n            let key = link.toNode.data.key;\r\n            handlerThis.setState({\r\n              modalLinkVisible:true,\r\n              temporaryLink:key\r\n            })\r\n        }\r\n      },\r\n      {relinkableFrom: true, relinkableTo: true},\r\n      goObj(go.Shape),  // the link shape\r\n      goObj(go.Shape,   // the arrowhead\r\n        { toArrow: \"OpenTriangle\", fill: null })\r\n    );\r\n    return linkTemplate\r\n  }\r\n\r\n\r\n  renderCanvas () {\r\n    let model = goObj(go.TreeModel)\r\n    let diagram = goObj(go.Diagram, this.refs.goJsDiv, {initialContentAlignment: go.Spot.Center});\r\n    diagram.addDiagramListener(\"LinkDrawn\", (ev) => {\r\n      this.state.flux.addLinkWithOriginAndDestination(ev.subject.fromNode.data.key, ev.subject.toNode.data.key);\r\n      this.setState({keyForRerender:Math.random()})\r\n    })\r\n    diagram.addDiagramListener(\"LinkRelinked\", (ev) => {\r\n      this.state.flux.relink(ev.parameter.part.key, ev.subject) // first param is the discarded node of the link, the second is the one that remains\r\n    })\r\n    diagram.addDiagramListener(\"SelectionDeleted\", (ev) => {\r\n      if (ev.subject.first().Yd.from) {\r\n        this.state.flux.removeLinkWithOriginAndDestination(ev.subject.first().Yd.from, ev.subject.first().Yd.to)      \r\n        this.setState({keyForRerender:Math.random()})\r\n      }\r\n      else{\r\n        this.state.flux.removeContent(ev.subject.first().part.data.key)\r\n        this.state.flux.removeLinkWithOrigin(ev.subject.first().part.data.key)\r\n        this.state.flux.removeLinkWithDestination(ev.subject.first().part.data.key)\r\n        this.setState({keyForRerender:Math.random()})\r\n      }\r\n    })\r\n    this.setModelAndDiagram(model, diagram)\r\n  \r\n  }\r\n\r\n  showSendDataModal(){\r\n    this.setState({modalVisible:true})\r\n  }\r\n\r\n  sendData(){\r\n        let contents = this.state.flux.getOrderedContentsFromLinks()\r\n        this.setState({loading:true})\r\n        let contentsToSend = {nombreConjunto:this.state.inputValue, pattern:this.state.pattern, contents:contents}\r\n        axios.post('https://alexa-apirest.herokuapp.com/users/createFlow/user/gonza', contentsToSend)\r\n        .then(() => {this.setState({\r\n          loading:false,success:\"success\", showSend:false})\r\n        })\r\n        .catch((error) => {\r\n          if (error.response && error.response.data) {\r\n            this.setState({\r\n              loading:false,\r\n              error:error.response.data\r\n            }, this.setState({\r\n              error:null\r\n            }))\r\n          }\r\n          else{\r\n            console.log(error)\r\n          }\r\n        })\r\n        this.setState({\r\n          modalVisible:false,\r\n        })\r\n        /* if(this.state.showSend){\r\n          axios.put('https://alexa-apirest.herokuapp.com/users/updateFlow/user/gonza', contentsToSend).then(() => {\r\n            this.setState({loading:false,success:\"success\",showSend:false})\r\n            this.state.myDiagram.div = null;\r\n          })\r\n          .catch((error) => {\r\n            error.response && error.response.data ? \r\n            this.setState({loading:false,error:error.response.data})\r\n            :\r\n            console.log(error)\r\n          })\r\n        }else{ */\r\n        /* } */\r\n  }\r\n  \r\n  setModelAndDiagram(model, diagram){\r\n    diagram.model = new go.GraphLinksModel([],[]);\r\n    diagram.nodeTemplate = this.generateNodeTemplate()\r\n    diagram.linkTemplate = this.generateLinkTemplate()\r\n    diagram.validCycle = go.Diagram.CycleDestinationTree;\r\n    this.setState({\r\n      myModel: model, \r\n      myDiagram: diagram\r\n    })    \r\n  }\r\n  \r\n  onDiagramEnter(event){\r\n    event.preventDefault();\r\n  }\r\n\r\n  getFluxContent(content){\r\n    return new FluxContent(content.identificador, content.contentId, content.categoria, content.order)\r\n  }\r\n\r\n  getDroppableContent(properties){ //crea el content object\r\n    let parsedContent1 = JSON.parse(properties[0].type)\r\n    let parsedContent2 = JSON.parse(properties[1].type)\r\n    let parsedContent3 = JSON.parse(properties[2].type)\r\n    let parsedContent4 = JSON.parse(properties[3].type)\r\n    const content = {...parsedContent1,...parsedContent2,...parsedContent3,...parsedContent4}\r\n    return new DroppableContent(content.identificador, content.contentid, content.categoria, content.isnavegable ) \r\n  }\r\n\r\n  isNotInDiagram(content){ //if the content is not in the diagram\r\n    return !this.state.addedContents.some(addedContent => JSON.stringify(addedContent.getIdContent()) === JSON.stringify(content.getIdContent()))\r\n  }\r\n\r\n\r\n  doesLinkApplies(link, oldContents){ //if the new link is related with any of the previous contents, then it should not be added\r\n    return !oldContents.some( content => link.origin.toLowerCase() === content.getName().toLowerCase() ||  link.destination.toLowerCase() === content.getName().toLowerCase() )\r\n  }\r\n\r\n  addContentToGoJsDiagram(content, fluxName, point){ //creates the content in the apps diagram\r\n    this.state.myDiagram.startTransaction('new node');\r\n    this.state.myDiagram.model.addNodeData({\r\n      key:content.getName(),\r\n      location:point,\r\n      identificador:fluxName !== \"\" ? fluxName + \" - \" + content.getName() : content.getName(),\r\n      color:go.Brush.randomColor()}\r\n      )\r\n      this.state.myDiagram.commitTransaction('new node');\r\n  }\r\n\r\n  addLinkToGoJsDiagram(link){ //creates the link in the apps diagram\r\n    this.state.myDiagram.startTransaction('new link');\r\n    this.state.myDiagram.model.addLinkDataCollection([{\r\n      from:link.origin,\r\n      to:link.destination\r\n    }])\r\n    this.state.myDiagram.commitTransaction('new link');\r\n  }\r\n\r\n\r\n  addContentsManually(flux){\r\n    let newFlux = new Flux(flux.name);\r\n    const oldContents = this.state.addedContents\r\n    flux.getOrderedContentsFromOrderField().map( (content, i) => {\r\n      if (this.isNotInDiagram(content)) {\r\n        newFlux.addContent(content)\r\n        let point = this.state.myDiagram.transformViewToDoc(new go.Point(300 + i * 100 , 100 + (i * 100)));\r\n        this.addContentToGoJsDiagram(content,flux.name,point) //adds the content to the actual Diagram\r\n        this.setState(prevState => ({\r\n          addedContents:[...prevState.addedContents, content]\r\n        }))\r\n      }\r\n    })\r\n    flux.getOrderedLinksFromContentsOrder().map(link => {\r\n      if (this.doesLinkApplies(link,oldContents)) {\r\n        this.addLinkToGoJsDiagram(link)\r\n        newFlux.addLink(link)\r\n      }\r\n    })\r\n    if (this.state.flux) {\r\n      this.state.flux.contents.map( content => newFlux.addContent(content))\r\n      this.state.flux.links.map(link => newFlux.addLink(link))\r\n    }\r\n    this.setState({\r\n      flux:newFlux,\r\n      inputValue:flux.name\r\n    })\r\n  }\r\n\r\n  calculateDroppedPoint(event){\r\n    window.PIXELRATIO = this.state.myDiagram.computePixelRatio();\r\n    let pixelratio = window.PIXELRATIO;\r\n    let can = event.target;\r\n    // if the target is not the canvas, we may have trouble, so just quit:\r\n    if (!(can instanceof HTMLCanvasElement)) return;\r\n    var bbox = can.getBoundingClientRect();\r\n    var bbw = bbox.width;\r\n    if (bbw === 0) bbw = 0.001;\r\n    var bbh = bbox.height;\r\n    if (bbh === 0) bbh = 0.001;\r\n    var mx = event.clientX - bbox.left * ((can.width/pixelratio) / bbw);\r\n    var my = event.clientY - bbox.top * ((can.height/pixelratio) / bbh);\r\n    return this.state.myDiagram.transformViewToDoc(new go.Point(mx, my));\r\n  }\r\n  \r\n  \r\n  onDiagramDrop(event){\r\n    let content = this.getDroppableContent(event.dataTransfer.items)\r\n    if (this.isNotInDiagram(content)) { \r\n      if (this.state.flux === null) { //if a flux is not being edited in the application\r\n        let newFlux = new Flux('new flux');\r\n        newFlux.addContent(content)\r\n        this.setState({flux: newFlux})\r\n      }\r\n      else{ //if there is already a flux being edited\r\n        this.state.flux.addContent(content)\r\n      }\r\n      let point = this.calculateDroppedPoint(event); //calculates the drop event point\r\n      let {contents} = this.state\r\n      contents.push(content)\r\n      this.setState({contents})    \r\n      this.addContentToGoJsDiagram(content, \"\", point) //inserts the content in the diagram\r\n      this.setState(prevState => ({\r\n        addedContents:[...prevState.addedContents, content]\r\n      }))\r\n    }\r\n  }\r\n\r\n  onDragOver(event){\r\n    //-----FALTA CONTROLAR QUE NO SE PUEDA SOLTAR UN CONTENIDO INHABILITADO EN EL DIAGRAMA\r\n    //Agregar tmb un metodo para dar aviso al hacer un mouseOver sobre el contenido inhabilitado\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  }\r\n\r\n  success = () => {\r\n    message.success('Se ha creado un nuevo flujo!', 3 , function(){\r\n      window.location.reload()\r\n    });   \r\n  };\r\n\r\n  error = () => {\r\n    message.error('Ocurrio un error al intentar crear un nuevo flujo', 3);\r\n  };\r\n  \r\n  onChangeInput(e){\r\n    this.setState({inputValue:e.target.value})\r\n  }\r\n\r\n  onChangeInputText = (e) =>{\r\n    this.setState({inputValueText:e.target.value})\r\n  }\r\n\r\n  onChangeRadioLink = (e) =>{\r\n    this.setState({\r\n      valueRadioLink:e.target.value\r\n    })\r\n  }\r\n  \r\n  onChangeRadioNode = (e) =>{\r\n    this.setState({\r\n      valueRadioNode:e.target.value\r\n    })\r\n  }\r\n\r\n  onChangeCheckNode = (checkedValue) => {\r\n  }\r\n  onChangeCheckLink = (checkedValue) => {\r\n    this.setState({\r\n      valueCheck:checkedValue.target.checked\r\n    })\r\n  }\r\n\r\n  confirmNodeModal = () =>{\r\n    let contentNode = this.state.temporaryContent //name del nodo\r\n    this.state.flux.getContentByName(contentNode).setData({pattern:this.state.valueRadioNode})\r\n    this.setState({\r\n      modalNodeVisible:false,\r\n      temporaryContent:null,\r\n      valueRadioNode:null\r\n    })\r\n  }\r\n\r\n  confirmLinkModal = () =>{\r\n    let contentNode = this.state.temporaryLink //link.destination\r\n    this.state.flux.getContentByName(contentNode).setData({\r\n      metaInfo:this.state.inputValueText,\r\n      next:this.state.valueRadioLink\r\n    })\r\n    this.setState({\r\n      modalLinkVisible:false,\r\n      inputValueText:null,\r\n      temporaryLink:null\r\n  \t})\r\n  }\r\n\r\n  nodeModal(){\r\n    const radioStyle = {\r\n      display: 'block',\r\n      height: '30px',\r\n      lineHeight: '30px',\r\n    };\r\n    const RadioGroup = Radio.Group;\r\n    return(\r\n      <Modal\r\n        title=\"Nodo\"\r\n        centered = {true}\r\n        visible={this.state.modalNodeVisible}\r\n        onOk={this.confirmNodeModal}\r\n        onCancel={() => this.setState({modalNodeVisible:false,valueRadioNode:null,temporaryContent:null})}>\r\n        <div>\r\n          <p>Opciones de Lectura:</p>\r\n          <Checkbox onChange={this.onChangeCheckNode}>\r\n              'Preguntar antes para poder navegar'\r\n          </Checkbox>\r\n          <br></br>\r\n          <RadioGroup onChange={this.onChangeRadioNode} value={this.state.valueRadioNode}>\r\n            <Radio style={radioStyle} value={\"Title\"}>Solo titulo</Radio>\r\n            <Radio style={radioStyle} value={\"All\"}>Titulo, introduccion y contenido</Radio>\r\n          </RadioGroup>\r\n        </div>             \r\n      </Modal>\r\n    )\r\n  }\r\n\r\n  linkModal(){\r\n    const RadioGroup = Radio.Group;\r\n    const radioStyle = {\r\n      display: 'block',\r\n      height: '30px',\r\n      lineHeight: '30px',\r\n    };\r\n    return(\r\n      <Modal\r\n      title=\"Link\"\r\n      visible={this.state.modalLinkVisible}\r\n      onOk={this.confirmLinkModal}\r\n      onCancel={() => this.setState({modalLinkVisible:false})}>\r\n      <div>\r\n        <p>Como continuar la lectura de contenidos?</p>\r\n        <Checkbox onChange={this.onChangeCheckLink}>\r\n            Leer texto previo al contenido\r\n            {this.state.valueCheck === true ? <Input placeholder=\"Ingresar texto\" onChange={this.onChangeInputText} style={{ width: 100, marginLeft: 10 }} /> : null}\r\n        </Checkbox>\r\n        <br></br>\r\n        <RadioGroup onChange={this.onChangeRadioLink} value={this.state.valueRadioLink}>\r\n          <Radio style={radioStyle} value={\"Read directly\"}>Leer directamente el proximo contenido</Radio>\r\n          <Radio style={radioStyle} value={\"Ask\"}>Preguntar antes de leer el proximo contenido</Radio>\r\n        </RadioGroup>\r\n      </div>\r\n    </Modal>\r\n    )\r\n  }\r\n  \r\n  submitModal(){\r\n    const customPanelStyle = {\r\n      background: '#f7f7f7',\r\n      borderRadius: 4,\r\n      marginBottom: 24,\r\n      border: 0,\r\n      overflow: 'hidden',\r\n      marginTop:\"20px\"\r\n    };\r\n    const {Option} = Select\r\n    const {Panel} = Collapse;\r\n    return(\r\n      <Modal\r\n        title=\"Confirmar accion\"\r\n        visible={this.state.modalVisible}\r\n        onOk={this.sendData}\r\n        onCancel={() => this.setState({modalVisible:false})}>\r\n          <div>\r\n            Por favor, ingrese un nombre para el conjunto de contenidos a enviar\r\n            <Input value={this.state.inputValue} style={{width:\"100px\", marginLeft:\"170px\",marginTop:\"20px\"}} onChange={this.onChangeInput}></Input> \r\n            <p> Seleccionar un patron de lectura de contenidos </p>\r\n            <Select value={this.state.pattern? this.state.pattern : undefined} placeholder=\"Patron de lectura\" onChange={(e) => this.handlePattern(e)} style={{width:\"230px\", marginLeft:\"130px\"}}>\r\n              {this.state.patterns.map( (pattern, index) => \r\n                <Option \r\n                  key={index}   \r\n                  value={pattern}>\r\n                    {pattern}\r\n                </Option>\r\n              )}\r\n            </Select>\r\n            { this.state.pattern &&\r\n              <Collapse bordered={false} defaultActiveKey={['1']} expandIcon={({ isActive }) => <Icon type=\"caret-right\" rotate={isActive ? 90 : 0}> </Icon>}>                \r\n                <Panel header={this.state.pattern} key=\"1\" style={customPanelStyle}>\r\n                  <p style={{ paddingLeft: 24 }}> {this.state.infoPatterns[this.state.index]} </p>\r\n                </Panel>\r\n              </Collapse>\r\n            }\r\n          </div>\r\n      </Modal>\r\n    )\r\n  }  \r\n\r\n  render () {\r\n    console.log(this.state.flux)\r\n    const goJsStyle = {'width': '116%','height': '874px', 'backgroundColor': \"white\",'marginLeft':\"-16%\"}\r\n    return(\r\n      <div>\r\n        {this.state.loading && <div className=\"example\"><Spin className=\"diagram-spin\" size=\"large\"/></div>}\r\n        <div onDragEnter={this.onDiagramEnter}  className=\"diagram\" onDrop={this.onDiagramDrop} onDragOver={this.onDragOver}>\r\n          <div  ref=\"goJsDiv\" style={goJsStyle}></div>\r\n        </div>\r\n        <div className=\"sendButtonContainer\">{ this.state.success ? this.success() : null }\r\n          <Button \r\n          className=\"sendButton\"         \r\n          onClick={this.showSendDataModal} key={this.state.keyForRerender} \r\n          disabled={!this.state.flux || (this.state.flux && this.state.flux.contents.length !== (this.state.flux.links.length + 1))}> \r\n            Deployar el skill \r\n          </Button>\r\n          {this.state.error && this.error()}\r\n        </div>\r\n        {this.nodeModal()}\r\n        {this.linkModal()}\r\n        {this.submitModal()}\r\n      </div>\r\n    ) \r\n  }\r\n}","import React from 'react'\r\nimport {Layout} from 'antd'\r\nimport LeftPanel from './LeftPanel'\r\n// import RightPanel from './RightPanel'\r\nimport Diagram from './Diagram'\r\nimport axios from 'axios'\r\nimport Flux from '../classes/Flux'\r\n\r\nexport default class ContentAdmin extends React.Component{\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      showFluxContent: false,\r\n      diagramFluxId: false,\r\n      categories: [],\r\n      contents:[],\r\n      fluxes:[]\r\n    }\r\n    this.changeContents = this.changeContents.bind(this)\r\n    this.addFluxToDiagram = this.addFluxToDiagram.bind(this)\r\n  }\r\n\r\n  componentDidMount(){\r\n    axios.get(\"https://alexa-apirest.herokuapp.com/users/categories/gonza\").then( (response) => {\r\n      if (response.data.length > 0) this.setState({categories:response.data}) \r\n    });\r\n\r\n    axios.get(\"https://alexa-apirest.herokuapp.com/users/admin/contentsByFirstCategory/gonza\").then( (response) => {\r\n      if (response.data.length > 0) this.setState({contents:response.data})  \r\n    });\r\n    axios.get(\"https://alexa-apirest.herokuapp.com/users/admin/contentsAndFlows/gonza\").then( (response) => {\r\n      let fluxes;\r\n      if (response.data.length > 0) {\r\n        fluxes = response.data.map(flux => {\r\n          return new Flux(flux._id, flux.contenidos)\r\n        })\r\n      }\r\n      this.setState({fluxes})  \r\n  })    \r\n  }\r\n\r\n  changeContents(newContents){\r\n    this.setState({contents:newContents})\r\n  }\r\n\r\n  addFluxToDiagram(flux){\r\n    this.setState({\r\n      showFluxContent:true,\r\n      diagramFlux: flux\r\n    })\r\n  }\r\n  \r\n  render(){\r\n\r\n    const {Header, Sider, Content} = Layout;\r\n       \r\n    return(\r\n      <div>\r\n        <Layout style={{height:\"1000px\"}}>\r\n        <Sider>\r\n          {this.state.contents.length > 0 && \r\n            <LeftPanel\r\n              changeContents={this.changeContents}\r\n              contents={this.state.contents}\r\n              fluxes={this.state.fluxes}\r\n              addFluxToDiagram={this.addFluxToDiagram}\r\n              categories={this.state.categories}\r\n              />\r\n          }\r\n        </Sider>\r\n        <Layout>\r\n          <Header style={{color:\"white\",fontSize:\"20px\"}}>Administrador de contenidos del Skill</Header>\r\n          <Content>\r\n            <Diagram\r\n              shouldShowFlux={this.state.showFluxContent}\r\n              flux={this.state.diagramFlux}\r\n            />\r\n          </Content>\r\n        </Layout>\r\n        <Sider>\r\n        </Sider>\r\n      </Layout>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n","import React, { Component } from 'react';\r\nimport ContentAdmin from './ContentAdmin';\r\nimport logo from '../logo.svg';\r\nimport './App.css';\r\nimport 'antd/dist/antd.css'\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <ContentAdmin/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}